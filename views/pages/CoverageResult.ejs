<%- include('../partials/header', {isLoggedIn: isLoggedIn}) %>



<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.12/css/dataTables.bootstrap.min.css" rel="stylesheet"/>


    <script>
        $(document).ready(function() {
            $('#ccResult').DataTable();
        });
    </script>

<style>
    tr > td:nth-child(2){
        color: black;
        background: transparent;
    }
</style>
<section class="about section-space-padding">
    <div class="row">
        <div class="col-sm-12">
            <div class="section-title">
                <h4>Code Coverage Report Generator</h4>
            </div>
        </div>
    </div>
    
    <div class="row">
        <div class="col-sm-12">
            <table id="ccResult"  class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th>Index</th>
                        <th>Class/Trigger Name</th>
                        <th>Lines</th>
                        <th>Percent</th>
                    </tr>
                </thead>
                <tbody>
                    <%var i = 1;%>
                    <% results.forEach(function(res) { 
                        var Percent = ((res.NumLinesCovered / (res.NumLinesCovered + res.NumLinesUncovered) ) * 100).toFixed(0);
                        if( isNaN(Percent) ){
                            Percent = 0;
                        }
                        var rowColor;
                        if( Percent >= 0 && Percent <=50 ){
                            rowColor = 'danger';
                        }
                        else if( Percent > 50 && Percent <=74 ){
                            rowColor = 'warning';
                        }
                        else if( Percent >= 75 ){
                            rowColor = 'success';
                        }
                    %>

                    <tr class="<%= rowColor %>">
                        <td>
                            <%= i %>
                            <%i=i+1;%>
                        </td>
                        <td>
                            <%= res.ApexClassOrTrigger.Name %>   
                        </td>
                        <td>
                            <%= res.NumLinesCovered %>   / <%= res.NumLinesUncovered %>   
                        </td>
                        <td>
                            <%=  Percent %>%
                        </td>
                    </tr>

                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>
    
</section>
<%- include('../partials/footer') %>